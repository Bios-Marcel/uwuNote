name: uwunote # you probably want to 'snapcraft register <name>'
version: '1.1.2' # just for humans, typically '1.2+git' or '1.3.2'
summary: Sticky note application
description: |
  A tiny stickynote application that allows to pin plaintext notes right
  onto your desktop.

grade: devel
confinement: strict

plugs:
  gnome-3-26-1604:
    interface: content
    target: $SNAP/gnome-platform
    default-provider: gnome-3-26-1604
  gtk-3-themes:
    interface: content
    target: $SNAP/data-dir/themes
    default-provider: gtk-common-themes
  icon-themes:
    interface: content
    target: $SNAP/data-dir/icons
    default-provider: gtk-common-themes
  sound-themes:
    interface: content
    target: $SNAP/data-dir/sounds
    default-provider: gtk-common-themes

apps:
  uwunote:
    command: desktop-launch parts/uwunote/go/bin/uwunote
    plugs:
      - home
      - x11
      - desktop
      - desktop-legacy

parts:
  uwunote:
    after: [desktop-gnome-platform]
    source: https://github.com/UwUNote/uwunote
    source-type: git
    plugin: go
    go-buildtags: ['no_systray']
    go-importpath: github.com/UwUNote/uwunote
    build-snaps:
      - go/1.11/stable
    build-packages:
      #- libappindicator3-dev
      - libglib2.0-dev
      - libgtk-3-dev
      - zlib1g-dev
    stage-packages:
      - libc6
      - zlib1g
      #- libappindicator3-1
    prime:
      - lib/x86_64-linux-gnu/libz.so.1
      #- usr/lib/x86_64-linux-gnu/libappindicator3.so.1
